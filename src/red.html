<head>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  	<title>Relief Distribution Management System</title>
  	<script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCU72VoGr-rUp62-w04DyBfucCdnDq1uhs&sensor=true">
    </script>
    <script type="text/javascript">
      	// This example creates a simple polygon representing the Bermuda Triangle.
		// When the user clicks on the polygon an info window opens, showing
		// information about the polygon's coordinates.

		var map;
		var infoWindow;

		function initialize() {
		  var mapOptions = {
		    zoom: 8, /* Set default zoom level*/
		    center: new google.maps.LatLng(10.606485,122.736816), /* Guimaras Island, The Philippines */
		    mapTypeId: google.maps.MapTypeId.TERRAIN
		  };

		  var bermudaTriangle;

		  map = new google.maps.Map(document.getElementById('map-canvas'),
		      mapOptions);

		  //map event
		  google.maps.event.addListener(map, 'click', showCurrentLocation);

		  infoWindow = new google.maps.InfoWindow();
		}

		/** @this {google.maps.Polygon} */
		function showArrays(event) {

		  // Since this polygon has only one path, we can call getPath()
		  // to return the MVCArray of LatLngs.
		  var vertices = this.getPath();

		  var contentString = '<b>Bermuda Triangle polygon</b><br>' +
		      'Clicked location: <br>' + event.latLng.lat() + ',' + event.latLng.lng() +
		      '<br>';

		  // Iterate over the vertices.
		  for (var i =0; i < vertices.getLength(); i++) {
		    var xy = vertices.getAt(i);
		    contentString += '<br>' + 'Coordinate ' + i + ':<br>' + xy.lat() + ',' +
		        xy.lng();
		  }

		  // Replace the info window's content and position.
		  infoWindow.setContent(contentString);
		  infoWindow.setPosition(event.latLng);

		  infoWindow.open(map);
		}

		function showCurrentLocation(event) {
			console.log(event.latLng.lat() + ', ' + event.latLng.lng());
			var currentLocation = '<b>Current Location Is: </b><br/>' +
				event.latLng.lat() + ', ' + event.latLng.lng();

			infoWindow.setContent(currentLocation);
			infoWindow.setPosition(event.latLng);
			infoWindow.open(map);
		}

		google.maps.event.addDomListener(window, 'load', initialize);
    </script>
</head>

<body>
	<header class="navbar navbar-inverse navbar-fixed-top header-nav" role="banner">
		<div class="container">
			<div class="navbar-header banner">
				{{> siteHeader}}
			</div>
		</div>
	</header>
	<div class="container content">
		<div class="row col-lg-2 menu">
			{{> menu}}
		</div>
		<div class="row col-lg-10 main">
			{{> main}}
		</div>
		
	</div>
	<footer class="red-footer">
		<div class="container">
			<span>{{> footer}}</span>
		</div>	
	</footer>
</body>

<template name="siteHeader">	
	<a href="/" class="redlogo">{{redLogo}}</a>
</template>

<template name="menu">
	<ul class="nav">
		{{#each menuItems}}
			<li>
				<a href="#" class="menugroup" title="{{title}}">{{label}}</a>
			</li>
			{{#if hasChildren}}
				<ul>
					{{#each menuitem}}
						<li>
							<a href="{{url}}" title="{{title}}">{{label}}</a>
						</li>
					{{/each}}
				</ul>
			{{/if}}
		{{/each}}
	</ul>

</template>

<template name="footer">
	{{footerMsg}}
</template>

<template name="main">
  <div id="map-canvas"/>
</template>
